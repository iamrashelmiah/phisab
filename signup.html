<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PocketHisab - Sign Up</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Body Styles */
        body {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(45deg, #7b5fe2, #5d8de6, #9d6bdb, #6a4c9c);
            background-size: 400% 400%;
            animation: gradientAnimation 25s ease infinite;
            padding: 20px;
            transition: background 1s ease;
        }

        /* Rainbow Background Animation */
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            25% { background-position: 50% 50%; }
            50% { background-position: 100% 50%; }
            75% { background-position: 50% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 35px 30px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            margin: 8px auto;
            max-width: 520px;
            width: calc(100% - 48px);
            box-sizing: border-box;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #8a6de9, #6a4c9c, #5d8de6, #8a6de9);
            background-size: 400% 400%;
            animation: gradientAnimation 8s ease infinite;
            z-index: -1;
            border-radius: 20px;
            opacity: 0.6;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(138, 109, 233, 0.25);
        }

        /* Logo */
        .logo {
            text-align: center;
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 25px;
            background: linear-gradient(45deg, #ffffff, #e6e6ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        /* Back to Login */
        .back-link {
            text-align: center;
            margin-bottom: 20px;
        }

        .back-link a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            font-size: 13px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .back-link a::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: #ffd700;
            transition: width 0.3s ease;
        }

        .back-link a:hover {
            color: #ffd700;
        }

        .back-link a:hover::before {
            width: 100%;
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 18px;
        }

        /* Form Groups */
        .form-group {
            margin-bottom: 18px;
            position: relative;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            font-size: 13px;
        }

        .form-control {
            width: 100%;
            padding: 14px 18px;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.08);
            font-size: 15px;
            transition: all 0.3s ease;
            border: 1.5px solid transparent;
            color: white;
            font-family: inherit;
        }

        .form-control:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.12);
            border-color: #8a6de9;
            box-shadow: 0 0 0 3px rgba(138, 109, 233, 0.15);
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-control:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Package Selection */
        .package-selection {
            margin: 25px 0;
        }

        .package-options {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 15px;
        }

        .package-option {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px 10px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1.5px solid transparent;
            color: rgba(255, 255, 255, 0.9);
        }

        .package-option:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .package-option.selected {
            background: rgba(255, 255, 255, 0.2);
            border-color: #ffd700;
            transform: translateY(-2px);
        }

        .package-name {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .package-price {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 3px;
        }

        .package-features {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
        }

        /* OTP Section */
        .otp-section {
            display: none;
            margin: 20px 0;
            text-align: center;
        }

        .otp-inputs {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 15px 0;
        }

        .otp-input {
            width: 45px;
            height: 45px;
            text-align: center;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.08);
            color: white;
            border: 1.5px solid transparent;
            transition: all 0.3s ease;
        }

        .otp-input:focus {
            outline: none;
            border-color: #8a6de9;
            background: rgba(255, 255, 255, 0.12);
        }

        .otp-input:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .otp-timer {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            margin: 10px 0;
        }

        /* Buttons */
        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, #8a6de9, #6a4c9c);
            color: white;
            box-shadow: 0 4px 12px rgba(138, 109, 233, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(138, 109, 233, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.25);
            color: rgba(255, 255, 255, 0.9);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
        }

        .btn-loading {
            position: relative;
            color: transparent;
        }

        .btn-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 18px;
            height: 18px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-group .btn {
            flex: 1;
        }

        /* Message Box */
        .message {
            padding: 10px;
            border-radius: 8px;
            margin-top: 12px;
            text-align: center;
            display: none;
            font-weight: 500;
            backdrop-filter: blur(10px);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.success {
            background: rgba(46, 125, 50, 0.15);
            color: #a5d6a7;
            border: 1px solid rgba(76, 175, 80, 0.25);
        }

        .message.error {
            background: rgba(198, 40, 40, 0.15);
            color: #ef9a9a;
            border: 1px solid rgba(244, 67, 54, 0.25);
        }

        .message.info {
            background: rgba(33, 150, 243, 0.15);
            color: #90caf9;
            border: 1px solid rgba(33, 150, 243, 0.25);
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            gap: 15px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .step-circle {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #8a6de9, #6a4c9c);
            color: white;
        }

        .step-text {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
        }

        .step.active .step-text {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }

        /* Error Message Styles */
        .error-message {
            color: #ef9a9a;
            font-size: 11px;
            margin-top: 4px;
            display: none;
        }

        /* Form Auto-save Indicator */
        .auto-save-indicator {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(20px);
            padding: 8px 12px;
            border-radius: 15px;
            color: rgba(255, 255, 255, 0.85);
            font-size: 11px;
            display: none;
            animation: slideIn 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .auto-save-indicator.show {
            display: block;
        }

        /* Navigation Bar */
        .navbar {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            padding: 10px 30px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 0 0 15px 15px;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-circle {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8a6de9, #6a4c9c);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(138, 109, 233, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .logo-circle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 18px rgba(138, 109, 233, 0.4);
        }

        .logo-circle i {
            color: white;
            font-size: 18px;
        }

        .nav-brand {
            font-size: 1.6rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ffffff, #e6e6ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .nav-center {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.5s ease;
        }

        .nav-links a:hover::before { left: 100%; }
        .nav-links a:hover { background: rgba(255,255,255,0.15); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .nav-links a.active { background: rgba(255,255,255,0.2); color: #ffd700; }

        .nav-controls { display: flex; align-items: center; gap: 10px; }
        .capsule-toggle { width: 70px; height: 32px; background: rgba(255,255,255,0.15); border-radius: 20px; padding: 2px; cursor: pointer; display: flex; position: relative; border: 1.5px solid rgba(255,255,255,0.2); transition: all 0.3s ease; overflow: hidden; }
        .capsule-toggle::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); transition: left 0.5s ease; }
        .capsule-toggle:hover::before { left: 100%; }
        .toggle-track { display: flex; width: 100%; height: 100%; position: relative; }
        .toggle-thumb { flex: 1; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; color: rgba(255,255,255,0.8); transition: all 0.3s ease; z-index: 2; border-radius: 18px; }
        .toggle-thumb.active { color: white; background: linear-gradient(135deg, #8a6de9, #6a4c9c); }
        .toggle-icon { font-size: 12px; }

        /* Mobile adjustments (kept small) */
        @media (max-width: 768px) {
            .navbar { padding: 8px 20px; flex-wrap: wrap; gap: 8px; }
            .nav-left { order: 1; flex: 1; }
            .nav-controls { order: 2; gap: 6px; }
            .nav-center { order: 3; flex: 1 1 100%; justify-content: center; margin-top: 8px; }
            .nav-links { gap: 12px; }
            .nav-links a { font-size: 13px; padding: 6px 12px; }
            .capsule-toggle { width: 65px; height: 28px; }
            .nav-brand { font-size: 1.3rem; }
            .logo-circle { width: 32px; height: 32px; }
            .logo-circle i { font-size: 14px; }
        }
        @media (max-width: 480px) {
            .navbar { padding: 6px 15px; }
            .nav-links { gap: 8px; }
            .nav-links a { font-size: 12px; padding: 5px 10px; }
            .capsule-toggle { width: 60px; height: 26px; }
            .toggle-icon { font-size: 10px; }
            .nav-brand { font-size: 1.1rem; }
        }

        /* ensure same default navbar and form sits below it */
        body { padding-top: 78px; }
        .glass-card {
            margin: 8px auto;
            max-width: 520px;
            width: calc(100% - 48px);
            box-sizing: border-box;
        }
        @media (max-width: 480px) {
            body { padding-top: 74px; }
            .glass-card { width: calc(100% - 24px); padding: 20px; margin: 12px auto; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .package-options {
                grid-template-columns: 1fr;
            }
            
            .glass-card {
                padding: 30px 25px;
            }
            
            .btn-group {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.8rem;
            }
            
            body {
                padding: 15px;
            }
            
            .otp-inputs {
                gap: 5px;
            }
            
            .otp-input {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background: linear-gradient(45deg, #5a4a9c, #4a3a7c, #3a2a5c, #4a3a7c);
            background-size: 400% 400%;
            animation: gradientAnimation 25s ease infinite;
        }
    </style>
</head>
<body>
 
    <!-- Navigation Bar (copied from index.html) -->
    <nav class="navbar" role="navigation" aria-label="Main Navigation">
        <!-- Left Side: Logo + Brand Name -->
        <div class="nav-left">
            <div class="logo-container">
                <div class="logo-circle">
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="nav-brand">PocketHisab</div>
            </div>
        </div>

        <!-- Center: Navigation Links -->
        <div class="nav-center">
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="features.html">Features</a>
                <a href="pricing.html">Pricing</a>
                <a href="contact.html">Contact</a>
            </div>
        </div>

        <!-- Right Side: Toggles -->
        <div class="nav-controls">
            <!-- Dark/Light Mode Toggle -->
            <div class="capsule-toggle" id="darkModeToggle">
                <div class="toggle-track">
                    <div class="toggle-thumb">
                        <span class="toggle-icon">‚òÄÔ∏è</span>
                    </div>
                    <div class="toggle-thumb">
                        <span class="toggle-icon">üåô</span>
                    </div>
                </div>
            </div>
            
            <!-- Language Toggle -->
            <div class="capsule-toggle" id="languageToggle">
                <div class="toggle-track">
                    <div class="toggle-thumb">
                        <span class="toggle-icon">EN</span>
                    </div>
                    <div class="toggle-thumb">
                        <span class="toggle-icon">BN</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- keep spacing under fixed navbar -->
    <div style="height:74px;"></div>
 
     <div class="glass-card">
        <!-- Logo -->
        <div class="logo">PocketHisab</div>
        
        <!-- Back to Login -->
        <div class="back-link">
            <a href="index.html">
                ‚Üê <span id="backText">Back to Login</span>
            </a>
        </div>

        <!-- Progress Steps -->
        <div class="progress-steps">
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <div class="step-text" id="step1Text">Personal Info</div>
            </div>
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <div class="step-text" id="step2Text">Package</div>
            </div>
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <div class="step-text" id="step3Text">Verify OTP</div>
            </div>
        </div>

        <!-- Sign Up Form -->
        <form id="signupForm">
            <!-- Step 1: Personal Information -->
            <div class="step-content" id="step1Content">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName" id="firstNameLabel">First Name *</label>
                        <input type="text" id="firstName" class="form-control" placeholder="Enter first name" required>
                        <div class="error-message" id="firstNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="lastName" id="lastNameLabel">Last Name *</label>
                        <input type="text" id="lastName" class="form-control" placeholder="Enter last name" required>
                        <div class="error-message" id="lastNameError"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="mobile" id="mobileLabel">Mobile Number *</label>
                    <input type="tel" id="mobile" class="form-control" placeholder="01XXXXXXXXX" required>
                    <div class="error-message" id="mobileError"></div>
                </div>

                <div class="form-group">
                    <label for="email" id="emailLabel">Email Address *</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                    <div class="error-message" id="emailError"></div>
                </div>

                <div class="form-group">
                    <label for="password" id="passwordLabel">Password *</label>
                    <input type="password" id="password" class="form-control" placeholder="Create a password" required>
                    <div class="error-message" id="passwordError"></div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword" id="confirmPasswordLabel">Confirm Password *</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your password" required>
                    <div class="error-message" id="confirmPasswordError"></div>
                </div>

                <button type="button" class="btn btn-primary" onclick="nextStep(2)" id="nextStep1Btn">Next ‚Üí Choose Package</button>
            </div>

            <!-- Step 2: Package Selection -->
            <div class="step-content" id="step2Content" style="display: none;">
                <div class="package-selection">
                    <h3 style="text-align: center; margin-bottom: 18px; color: rgba(255, 255, 255, 0.9);" id="packageTitle">Choose Your Package</h3>
                    
                    <div class="package-options">
                        <div class="package-option" onclick="selectPackage('basic')">
                            <div class="package-name" id="basicName">Basic</div>
                            <div class="package-price" id="basicPrice">‡ß≥149/month</div>
                            <div class="package-features" id="basicFeatures">300 SMS</div>
                        </div>
                        
                        <div class="package-option" onclick="selectPackage('standard')">
                            <div class="package-name" id="standardName">Standard</div>
                            <div class="package-price" id="standardPrice">‡ß≥199/month</div>
                            <div class="package-features" id="standardFeatures">400 SMS</div>
                        </div>
                        
                        <div class="package-option" onclick="selectPackage('premium')">
                            <div class="package-name" id="premiumName">Premium</div>
                            <div class="package-price" id="premiumPrice">‡ß≥249/month</div>
                            <div class="package-features" id="premiumFeatures">500 SMS</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label style="text-align: center; display: block; color: rgba(255, 255, 255, 0.9);" id="selectedPackageLabel">Selected Package: <span id="selectedPackageText">None</span></label>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" onclick="nextStep(1)" id="backStep2Btn">‚Üê Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(3)" id="nextStep2Btn">Next ‚Üí Verify</button>
                </div>
            </div>

            <!-- Step 3: OTP Verification -->
            <div class="step-content" id="step3Content" style="display: none;">
                <div class="otp-section" id="otpSection">
                    <h3 style="text-align: center; margin-bottom: 12px; color: rgba(255, 255, 255, 0.9);" id="verifyTitle">Verify Your Account</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 18px;" id="otpMessage">
                        We've sent OTP codes to your mobile and email
                    </p>
                    
                    <div class="otp-inputs">
                        <input type="text" class="otp-input" maxlength="1" oninput="moveToNext(this, 1)">
                        <input type="text" class="otp-input" maxlength="1" oninput="moveToNext(this, 2)">
                        <input type="text" class="otp-input" maxlength="1" oninput="moveToNext(this, 3)">
                        <input type="text" class="otp-input" maxlength="1" oninput="moveToNext(this, 4)">
                        <input type="text" class="otp-input" maxlength="1" oninput="moveToNext(this, 5)">
                        <input type="text" class="otp-input" maxlength="1" oninput="moveToNext(this, 6)">
                    </div>
                    
                    <div class="otp-timer" id="otpTimer">
                        <span id="resendText">Resend OTP in:</span> <span id="timer">02:00</span>
                    </div>
                    
                    <button type="button" class="btn btn-secondary" onclick="resendOTP()" id="resendOtpBtn"><span id="resendOtpText">Resend OTP</span></button>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" onclick="nextStep(2)" id="backStep3Btn">‚Üê Back</button>
                    <button type="button" class="btn btn-primary" onclick="verifyOTP()" id="verifyBtn"><span id="verifyBtnText">Verify & Create Account</span></button>
                </div>
            </div>
        </form>

        <!-- Message Box -->
        <div id="message" class="message"></div>
    </div>

    <!-- Auto-save Indicator -->
    <div class="auto-save-indicator" id="autoSaveIndicator">
        <i class="fas fa-save"></i> <span id="saveText">Form data saved</span>
    </div>

    <script>
    let currentStep = 1;
    let userInput = '';
    let otpTimer;
    let canResendOTP = false;
    let isEnglish = true;
    let isDarkMode = false;

    // Language texts
    const translations = {
        en: {
            backText: "Back to Login",
            step1Text: "Personal Info",
            step2Text: "Package",
            step3Text: "Verify OTP",
            firstNameLabel: "First Name *",
            lastNameLabel: "Last Name *",
            mobileLabel: "Mobile Number *",
            emailLabel: "Email Address *",
            passwordLabel: "Password *",
            confirmPasswordLabel: "Confirm Password *",
            nextStep1Btn: "Next ‚Üí Choose Package",
            packageTitle: "Choose Your Package",
            basicName: "Basic",
            basicPrice: "‡ß≥149/month",
            basicFeatures: "300 SMS",
            standardName: "Standard",
            standardPrice: "‡ß≥199/month",
            standardFeatures: "400 SMS",
            premiumName: "Premium",
            premiumPrice: "‡ß≥249/month",
            premiumFeatures: "500 SMS",
            selectedPackageLabel: "Selected Package:",
            backStep2Btn: "‚Üê Back",
            nextStep2Btn: "Next ‚Üí Verify",
            verifyTitle: "Verify Your Account",
            otpMessage: "We've sent OTP codes to your mobile and email",
            resendText: "Resend OTP in:",
            resendOtpText: "Resend OTP",
            backStep3Btn: "‚Üê Back",
            verifyBtnText: "Verify & Create Account",
            saveText: "Form data saved",
            firstNameError: "First name is required",
            lastNameError: "Last name is required",
            mobileError: "Please enter a valid Bangladeshi mobile number",
            emailError: "Please enter a valid email address",
            passwordError: "Password must be at least 6 characters long",
            confirmPasswordError: "Passwords do not match",
            formError: "Please fix the errors above",
            packageError: "Please select a package!",
            otpError: "Please enter the complete 6-digit OTP!",
            otpSent: "OTP sent to your mobile and email!",
            otpResent: "OTP resent successfully!",
            accountCreated: "Account created successfully! Redirecting...",
            dataRestored: "Form data restored from previous session",
            welcome: "Welcome! Let's create your account.",
            userInputLabel: "Email or Mobile Number *",
            sendOtpBtn: "Send OTP",
            verifying: "Verifying...",
            otpVerified: "OTP verified successfully!",
            passwordReset: "Password reset successfully!",
            resetting: "Resetting password...",
            shortPassword: "Password must be at least 6 characters long",
            passwordMismatch: "Passwords do not match",
            weakPassword: "Weak password: use at least 6 characters, including letters and numbers",
            mediumPassword: "Medium password: good, but can be stronger",
            strongPassword: "Strong password: great job!",
            completeOtp: "Please enter the complete 6-digit OTP",
            invalidInput: "Please enter a valid email or mobile number",
            sendingOtp: "Sending OTP...",
            otpSentTo: "OTP sent to your email or mobile number",
            resendBtnText: "Resend OTP",
            backBtnText: "‚Üê Back",
            verifyBtnText: "Verify OTP",
            newPasswordLabel: "New Password *",
            confirmPasswordLabel: "Confirm Password *",
            passwordReqText: "Password must be at least 6 characters long",
            passwordMatchText: "Passwords do not match",
            backBtn2Text: "‚Üê Back",
            resetBtnText: "Reset Password"
        },
        bn: {
            backText: "‡¶≤‡¶ó‡¶á‡¶®‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®",
            step1Text: "‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø",
            step2Text: "‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú",
            step3Text: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®",
            firstNameLabel: "‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡¶Ç‡¶∂ *",
            lastNameLabel: "‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶Ç‡¶∂ *",
            mobileLabel: "‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *",
            emailLabel: "‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ *",
            passwordLabel: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *",
            confirmPasswordLabel: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® *",
            nextStep1Btn: "‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‚Üí ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®",
            packageTitle: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®",
            basicName: "‡¶¨‡ßá‡¶∏‡¶ø‡¶ï",
            basicPrice: "‡ß≥149/‡¶Æ‡¶æ‡¶∏",
            basicFeatures: "‡ß©‡ß¶‡ß¶ ‡¶è‡¶∏‡¶è‡¶Æ‡¶è‡¶∏",
            standardName: "‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶°",
            standardPrice: "‡ß≥199/‡¶Æ‡¶æ‡¶∏",
            standardFeatures: "‡ß™‡ß¶‡ß¶ ‡¶è‡¶∏‡¶è‡¶Æ‡¶è‡¶∏",
            premiumName: "‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ",
            premiumPrice: "‡ß≥249/‡¶Æ‡¶æ‡¶∏",
            premiumFeatures: "‡ß´‡ß¶‡ß¶ ‡¶è‡¶∏‡¶è‡¶Æ‡¶è‡¶∏",
            selectedPackageLabel: "‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú:",
            backStep2Btn: "‚Üê ‡¶™‡¶ø‡¶õ‡¶®‡ßá",
            nextStep2Btn: "‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‚Üí ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®",
            verifyTitle: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®",
            otpMessage: "‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶ï‡ßã‡¶° ‡¶™‡¶æ‡¶†‡¶ø‡¶Ø‡¶º‡ßá‡¶õ‡¶ø",
            resendText: "‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®:",
            resendOtpText: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶™‡¶æ‡¶†‡¶æ‡¶®",
            backStep3Btn: "‚Üê ‡¶™‡¶ø‡¶õ‡¶®‡ßá",
            verifyBtnText: "‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®",
            saveText: "‡¶´‡¶∞‡ßç‡¶Æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá",
            firstNameError: "‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡¶Ç‡¶∂ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®",
            lastNameError: "‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶Ç‡¶∂ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®",
            mobileError: "‡¶∏‡¶†‡¶ø‡¶ï ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡¶ø ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®",
            emailError: "‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶¶‡¶ø‡¶®",
            passwordError: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá",
            confirmPasswordError: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡ßá‡¶≤‡ßá ‡¶®‡¶æ",
            formError: "‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶≠‡ßÅ‡¶≤‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®",
            packageError: "‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!",
            otpError: "‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡ß¨-‡¶Ö‡¶ô‡ßç‡¶ï‡ßá‡¶∞ ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶¶‡¶ø‡¶®!",
            otpSent: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
            otpResent: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
            accountCreated: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...",
            dataRestored: "‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶∏‡ßá‡¶∂‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶´‡¶∞‡ßç‡¶Æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá",
            welcome: "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! ‡¶Ü‡¶∏‡ßÅ‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶ø‡•§",
            userInputLabel: "‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *",
            sendOtpBtn: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®",
            verifying: "‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...",
            otpVerified: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
            passwordReset: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
            resetting: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...",
            shortPassword: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá",
            passwordMismatch: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡ßá‡¶≤‡ßá ‡¶®‡¶æ",
            weakPassword: "‡¶¶‡ßÅ‡¶∞‡ßç‡¶¨‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°: ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶Ø‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá",
            mediumPassword: "‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°: ‡¶≠‡¶æ‡¶≤, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶∞‡¶ì ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá",
            strongPassword: "‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°: ‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!",
            completeOtp: "‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡ß¨-‡¶Ö‡¶ô‡ßç‡¶ï‡ßá‡¶∞ ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶¶‡¶ø‡¶®",
            invalidInput: "‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßà‡¶ß ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®",
            sendingOtp: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...",
            otpSentTo: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá",
            resendBtnText: "‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®",
            backBtnText: "‚Üê ‡¶™‡¶ø‡¶õ‡¶®‡ßá",
            verifyBtnText: "‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®",
            newPasswordLabel: "‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *",
            confirmPasswordLabel: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® *",
            passwordReqText: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá",
            passwordMatchText: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡ßá‡¶≤‡ßá ‡¶®‡¶æ",
            backBtn2Text: "‚Üê ‡¶™‡¶ø‡¶õ‡¶®‡ßá",
            resetBtnText: "‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®"
        }
    };

    // Update page content based on language
    function updateLanguage(lang) {
        const t = translations[lang];
        const isEn = lang === 'en';

        document.getElementById('backText').textContent = t.backText;
        document.getElementById('step1Text').textContent = t.step1Text;
        document.getElementById('step2Text').textContent = t.step2Text;
        document.getElementById('step3Text').textContent = t.step3Text;
        document.getElementById('userInputLabel').textContent = t.userInputLabel;
        document.getElementById('sendOtpBtn').textContent = t.sendOtpBtn;
        document.getElementById('verifyTitle').textContent = t.verifyTitle;
        document.getElementById('otpSentTo').textContent = t.otpSentTo;
        document.getElementById('resendText').textContent = t.resendText;
        document.getElementById('resendBtnText').textContent = t.resendBtnText;
        document.getElementById('backBtnText').textContent = t.backBtnText;
        document.getElementById('verifyBtnText').textContent = t.verifyBtnText;
        document.getElementById('newPasswordLabel').textContent = t.newPasswordLabel;
        document.getElementById('confirmPasswordLabel').textContent = t.confirmPasswordLabel;
        document.getElementById('passwordReqText').textContent = t.passwordReqText;
        document.getElementById('passwordMatchText').textContent = t.passwordMatchText;
        document.getElementById('backBtn2Text').textContent = t.backBtn2Text;
        document.getElementById('resetBtnText').textContent = t.resetBtnText;

        // Update placeholders using the lang passed in
        document.getElementById('userInput').placeholder = isEn ? "Enter your email or mobile number" : "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®";
        document.getElementById('newPassword').placeholder = isEn ? "Enter new password" : "‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®";
        document.getElementById('confirmPassword').placeholder = isEn ? "Confirm new password" : "‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®";

        // Update page title
        document.title = isEn ? "PocketHisab - Forgot Password" : "‡¶™‡¶ï‡ßá‡¶ü‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ - ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®";
    }

    // Show message function
    function showMessage(text, type) {
        const message = document.getElementById('message');
        message.textContent = text;
        message.className = 'message ' + type;
        message.style.display = 'block';

        setTimeout(() => {
            message.style.display = 'none';
        }, 5000);
    }

    // Navigate to next step
    function nextStep(step) {
        document.querySelectorAll('.step-content').forEach(content => { content.style.display = 'none'; });
        document.querySelectorAll('.step').forEach(stepEl => { stepEl.classList.remove('active'); stepEl.classList.remove('completed'); });

        for (let i = 1; i < step; i++) {
            document.getElementById('step' + i).classList.add('completed');
        }

        document.getElementById('step' + step + 'Content').style.display = 'block';
        document.getElementById('step' + step).classList.add('active');

        currentStep = step;
    }

    function previousStep(step) { nextStep(step); }

    // Send OTP (keeps same validation)
    function sendOTP() {
        userInput = document.getElementById('userInput').value.trim();

        if (!userInput) {
            showMessage(isEnglish ? translations.en.invalidInput : translations.bn.invalidInput, 'error');
            return;
        }

        const isEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(userInput);
        const isMobile = /^01[3-9]\d{8}$/.test(userInput);

        if (!isEmail && !isMobile) {
            showMessage(isEnglish ? translations.en.invalidInput : translations.bn.invalidInput, 'error');
            return;
        }

        // Use the clicked button (safe approach)
        const btn = document.getElementById('sendOtpBtn');
        const originalText = btn.textContent;
        btn.textContent = isEnglish ? translations.en.sendingOtp : translations.bn.sendingOtp;
        btn.disabled = true;

        setTimeout(() => {
            btn.textContent = originalText;
            btn.disabled = false;

            document.getElementById('otpSentTo').textContent =
                isEnglish ?
                `OTP sent to your ${isEmail ? 'email' : 'mobile number'}` :
                `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ${isEmail ? '‡¶á‡¶Æ‡ßá‡¶á‡¶≤‡ßá' : '‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá'} ‡¶ì‡¶ü‡¶ø‡¶™‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá`;

            nextStep(2);
            startOTPTimer();

            showMessage(isEnglish ? translations.en.otpSent : translations.bn.otpSent, 'success');
        }, 2000);
    }

    // OTP Timer
    function startOTPTimer() {
        let timeLeft = 120;
        const timerElement = document.getElementById('timer');
        const resendBtn = document.getElementById('resendBtn');

        clearInterval(otpTimer);
        canResendOTP = false;
        resendBtn.disabled = true;

        otpTimer = setInterval(() => {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;

            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (timeLeft <= 0) {
                clearInterval(otpTimer);
                timerElement.textContent = '00:00';
                canResendOTP = true;
                resendBtn.disabled = false;
            }

            timeLeft--;
        }, 1000);
    }

    function moveToNext(input, nextIndex) {
        if (input.value.length === 1) {
            const inputs = Array.from(input.parentElement.querySelectorAll('.otp-input'));
            const idx = inputs.indexOf(input);
            if (idx >= 0 && inputs[idx + 1]) inputs[idx + 1].focus();
        }
    }

    function resendOTP() {
        if (!canResendOTP) return;
        startOTPTimer();
        showMessage(isEnglish ? translations.en.otpResent : translations.bn.otpResent, 'success');
    }

    function verifyOTP() {
        const otpInputs = document.querySelectorAll('.otp-input');
        let otp = '';
        otpInputs.forEach(input => { otp += input.value; });

        if (otp.length !== 6) {
            showMessage(isEnglish ? translations.en.completeOtp : translations.bn.completeOtp, 'error');
            return;
        }

        const btn = document.getElementById('verifyBtn');
        const originalText = btn.querySelector('span').textContent;
        btn.querySelector('span').textContent = isEnglish ? translations.en.verifying : translations.bn.verifying;
        btn.disabled = true;

        setTimeout(() => {
            btn.querySelector('span').textContent = originalText;
            btn.disabled = false;

            nextStep(3);
            showMessage(isEnglish ? translations.en.otpVerified : translations.bn.otpVerified, 'success');
        }, 1500);
    }

    function checkPasswordStrength() {
        const password = document.getElementById('newPassword').value;
        const strengthBar = document.getElementById('strengthBar');
        const requirements = document.getElementById('passwordRequirements');

        let strength = 0;
        if (password.length >= 6) strength += 1;
        if (password.length >= 8) strength += 1;
        if (/[A-Z]/.test(password)) strength += 1;
        if (/[0-9]/.test(password)) strength += 1;
        if (/[^A-Za-z0-9]/.test(password)) strength += 1;

        strengthBar.className = 'strength-bar';
        if (strength <= 2) {
            strengthBar.classList.add('strength-weak');
            requirements.textContent = isEnglish ? translations.en.weakPassword : translations.bn.weakPassword;
        } else if (strength <= 4) {
            strengthBar.classList.add('strength-medium');
            requirements.textContent = isEnglish ? translations.en.mediumPassword : translations.bn.mediumPassword;
        } else {
            strengthBar.classList.add('strength-strong');
            requirements.textContent = isEnglish ? translations.en.strongPassword : translations.bn.strongPassword;
        }
    }

    function checkPasswordMatch() {
        const password = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const matchMessage = document.getElementById('passwordMatch');

        matchMessage.style.display = (confirmPassword && password !== confirmPassword) ? 'block' : 'none';
    }

    function resetPassword() {
        const password = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (!password || !confirmPassword) {
            showMessage(isEnglish ? translations.en.shortPassword : translations.bn.shortPassword, 'error');
            return;
        }

        if (password !== confirmPassword) {
            showMessage(isEnglish ? translations.en.passwordMismatch : translations.bn.passwordMismatch, 'error');
            return;
        }

        if (password.length < 6) {
            showMessage(isEnglish ? translations.en.shortPassword : translations.bn.shortPassword, 'error');
            return;
        }

        const btn = document.getElementById('resetBtn');
        const originalText = btn.querySelector('span').textContent;
        btn.querySelector('span').textContent = isEnglish ? translations.en.resetting : translations.bn.resetting;
        btn.disabled = true;

        setTimeout(() => {
            showMessage(isEnglish ? translations.en.passwordReset : translations.bn.passwordReset, 'success');
            setTimeout(() => { window.location.href = 'index.html'; }, 2000);
        }, 1500);
    }

    // --- Ensure language & dark-mode toggles behave like index.html ---
    // helper to sync dark-mode toggle UI if not already present
    function updateDarkModeToggle(isDark) {
        const thumbs = document.querySelectorAll('#darkModeToggle .toggle-thumb');
        if (thumbs && thumbs.length >= 2) {
            thumbs[0].classList.toggle('active', !isDark);
            thumbs[1].classList.toggle('active', isDark);
        }
    }

    // helper to sync language toggle UI if not already present
    function updateLanguageToggle(isEn) {
        const thumbs = document.querySelectorAll('#languageToggle .toggle-thumb');
        if (thumbs && thumbs.length >= 2) {
            thumbs[0].classList.toggle('active', isEn);
            thumbs[1].classList.toggle('active', !isEn);
        }
    }

    // language toggle click (half-click behavior same as index)
    document.addEventListener('DOMContentLoaded', function () {
        const darkToggle = document.getElementById('darkModeToggle');
        const langToggle = document.getElementById('languageToggle');

        // Initialize dark mode from localStorage
        const savedDarkMode = localStorage.getItem('darkMode');
        isDarkMode = savedDarkMode === 'true';
        document.body.classList.toggle('dark-mode', isDarkMode);
        updateDarkModeToggle(isDarkMode);

        // Initialize language from localStorage
        const savedLanguage = localStorage.getItem('language');
        if (savedLanguage === 'bn') { isEnglish = false; updateLanguage('bn'); }
        else { isEnglish = true; updateLanguage('en'); }
        updateLanguageToggle(isEnglish);

        // Dark mode click handler (capsule halves)
        if (darkToggle) {
            darkToggle.addEventListener('click', function (e) {
                const rect = this.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const isRightClick = clickX > rect.width / 2;
                if (isRightClick) {
                    isDarkMode = true;
                    document.body.classList.add('dark-mode');
                    updateDarkModeToggle(true);
                    showMessage(isEnglish ? 'Dark mode activated' : '‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡ßü‡ßá‡¶õ‡ßá', 'success');
                    localStorage.setItem('darkMode', 'true');
                } else {
                    isDarkMode = false;
                    document.body.classList.remove('dark-mode');
                    updateDarkModeToggle(false);
                    showMessage(isEnglish ? 'Light mode activated' : '‡¶≤‡¶æ‡¶á‡¶ü ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡ßü‡ßá‡¶õ‡ßá', 'success');
                    localStorage.setItem('darkMode', 'false');
                }
            });
        }

        // Language click handler (capsule halves)
        if (langToggle) {
            langToggle.addEventListener('click', function (e) {
                const rect = this.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const isRightClick = clickX > rect.width / 2;
                if (isRightClick) {
                    isEnglish = false;
                    updateLanguage('bn');
                    updateLanguageToggle(false);
                    showMessage('‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá', 'success');
                    localStorage.setItem('language', 'bn');
                } else {
                    isEnglish = true;
                    updateLanguage('en');
                    updateLanguageToggle(true);
                    showMessage('English language selected', 'success');
                    localStorage.setItem('language', 'en');
                }
            });
        }
    });

    // Add keyboard shortcut for language toggle (Ctrl+L)
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && (e.key === 'l' || e.key === 'L')) {
            e.preventDefault();
            isEnglish = !isEnglish;
            updateLanguage(isEnglish ? 'en' : 'bn');
            updateLanguageToggle(isEnglish);
            localStorage.setItem('language', isEnglish ? 'en' : 'bn');
            showMessage(isEnglish ? 'English language selected' : '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá', 'success');
        }
    });
</script>
</body>
</html>